# 紫微斗数项目开发规范

## 一、项目使用的框架版本及依赖
- **前端框架**：Next.js 14.1.0 + React 18 + TypeScript
- **样式解决方案**：Tailwind CSS 3.3.0
- **农历计算**：chinese-lunar-calendar 库
- **核心库**：iztro 库（提供星曜数据和命盘计算）

## 二、测试框架的详细要求
- **测试类型**：单元测试、集成测试
- **测试工具**：Jest + React Testing Library
- **测试覆盖率**：核心功能测试覆盖率不低于 80%
- **测试文件**：测试文件与被测试文件同目录，命名格式为 `*.test.ts` 或 `*.spec.ts`

## 三、AI 开发规范
1. **数据来源**：所有星曜数据均来自 iztro 库，四化推算严格遵循 sihua.ts 字典
4. **错误处理**：对可能的输入错误或计算异常进行合理处理，给出清晰的错误提示


## 四、代码规范
- **命名**：使用驼峰命名法，变量和函数名清晰表达其用途
- **类型定义**：为所有数据和函数添加明确的 TypeScript 类型定义
- **组件化**：将 UI 拆分为合理的组件，提高代码复用性
- **注释**：为关键代码添加清晰的注释，解释实现逻辑

## 五、项目管理
- **依赖管理**：使用 npm 管理项目依赖，确保版本一致性
- **环境变量**：敏感配置通过环境变量管理，避免硬编码
- **版本控制**：使用 Git 进行版本控制，遵循合理的分支管理策略

## 六、 给 AI 助手 (Trae) 的特殊执行指令
1. **不要破坏现有逻辑**：在修改特定组件时，除非用户明确要求，否则不得随意重构或删除与当前任务无关的代码和注释。
2. **思考后执行**：遇到复杂的历法推算或四化飞星逻辑，必须先在对话中输出**逻辑推导步骤**，与用户对齐后再写代码。
3. **保持组件精简**：单个文件超过 300 行时，应主动建议并执行组件拆分。

本规范旨在确保项目的质量和可持续发展，所有参与项目的开发者都应遵守。